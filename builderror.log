
You reached the start of the range → Dec 5, 2024 10:01 PM

 

[Region: us-west1]

==============

Using Nixpacks

==============


context: bba6c2d4dcf9a7d9c74670b4ab16c433

 

╔════════════════════════ Nixpacks v1.29.1 ════════════════════════╗

║ node:setup   │ nodejs_18, npm-9_x                                ║

║──────────────────────────────────────────────────────────────────║

║ setup        │ nodejs_18, npm-9_x                                ║

║──────────────────────────────────────────────────────────────────║

║ install      │ npm install -g corepack@0.24.1 && corepack enable ║

║              │ npm i                                             ║

║──────────────────────────────────────────────────────────────────║

║ node:install │ npm install -g corepack@0.24.1 && corepack enable ║

║              │ npm i                                             ║

║──────────────────────────────────────────────────────────────────║

║ build        │ yarn build                                        ║

║──────────────────────────────────────────────────────────────────║

║ node:build   │ npm run build                                     ║

║──────────────────────────────────────────────────────────────────║

║ start        │ yarn start                                        ║

╚══════════════════════════════════════════════════════════════════╝

 

 

#0 building with "builder-1fxr" instance using docker-container driver

 

#1 [internal] load build definition from Dockerfile

#1 transferring dockerfile: 3.86kB done

#1 DONE 0.0s

 

#2 [internal] load metadata for ghcr.io/railwayapp/nixpacks:ubuntu-1731369831

 

#2 DONE 0.1s

 

 

#3 [stage-0 1/8] FROM ghcr.io/railwayapp/nixpacks:ubuntu-1731369831@sha256:248c718af9f76e602170a3cdbf69658edf55c910023104e1f277e517b77977a0

#3 resolve ghcr.io/railwayapp/nixpacks:ubuntu-1731369831@sha256:248c718af9f76e602170a3cdbf69658edf55c910023104e1f277e517b77977a0 done

#3 DONE 0.0s

 

#4 [stage-0 2/8] WORKDIR /app/

#4 CACHED

 

 

#5 [internal] load .dockerignore

#5 transferring context: 2B done

#5 DONE 0.0s

 

#6 [internal] load build context

#6 transferring context: 1.42MB 0.0s done

#6 DONE 0.1s

#8 24.92 copying path '/nix/store/ww3prpgrc22jdrrmigrjyhk9jc9lifwd-libmpc-1.3.1' from 'https://cache.nixos.org';...

 

#8 24.97 copying path '/nix/store/idxlqignsfqkqbq9rzr6k6c3vz590nyl-libkrb5-1.21.2-dev' from 'https://cache.nixos.org';...

#8 25.01 copying path '/nix/store/a4iyvp3hwl3j0h8ypbf4jkj7b7grbz8z-libssh2-1.11.0' from 'https://cache.nixos.org';...

 

#8 25.01 copying path '/nix/store/fjx7bgg90asnb4clc7dg0jmcxdkm4pp7-openssl-3.0.14-bin' from 'https://cache.nixos.org';...

#8 25.02 copying path '/nix/store/2p1sq1nr09xr3xb1a9lrjgdanvk1aakb-binutils-2.42' from 'https://cache.nixos.org';...

#8 25.02 copying path '/nix/store/3s3rjkl3mx05wp0lmxgwkaqhbz9sy6kk-gcc-13.3.0' from 'https://cache.nixos.org';...

#8 25.02 copying path '/nix/store/knxxpiihqyi01k1dayl988wymihdp0fn-gmp-with-cxx-6.3.0' from 'https://cache.nixos.org';...

#8 25.02 copying path '/nix/store/splxh36pbmk0d4705k75kn0353drm9i9-icu4c-74.2' from 'https://cache.nixos.org';...

#8 25.02 copying path '/nix/store/yq6n8b0mnk0qxzbs3ajsjcp8ziwqylrl-patchelf-0.15.0' from 'https://cache.nixos.org';...

 

#8 25.02 copying path '/nix/store/ppfzl2wqzs7ljfj0dxypcvrhr9x6ka3f-openssl-3.0.14-bin' from 'https://cache.nixos.org';...

#8 25.03 copying path '/nix/store/qnriaiw3frdfdsicfnbybx9c4363d67x-curl-8.8.0' from 'https://cache.nixos.org';...

#8 25.05 copying path '/nix/store/zvwnzwrvkbb8lafxw3qz2sj2aj4azp05-openssl-3.0.14-dev' from 'https://cache.nixos.org';...

#8 25.05 copying path '/nix/store/dhv5gh89him9a7ddr56cqg87zfkmjihp-coreutils-9.5' from 'https://cache.nixos.org';...

#8 25.07 copying path '/nix/store/85xwlijhhzlcmq1js0x8npkx4xy9lkk0-curl-8.8.0-bin' from 'https://cache.nixos.org';...

#8 25.07 copying path '/nix/store/dp6821c0s4bbmmws3lc6nicz09lnjlgl-openssl-3.0.14-dev' from 'https://cache.nixos.org';...

#8 25.10 copying path '/nix/store/v045nd614l4k1z7ahvx4vncwrm7cx1jc-libssh2-1.11.0-dev' from 'https://cache.nixos.org';...

#8 25.11 copying path '/nix/store/8ynk6xvczjnjv81bfghkjwrap0hn6qah-diffutils-3.10' from 'https://cache.nixos.org';...

#8 25.11 copying path '/nix/store/j71whmq49hfcvhpn4wqzrqcnbq5mafic-findutils-4.10.0' from 'https://cache.nixos.org';...

#8 25.11 copying path '/nix/store/jdyb7l90301ri8zcipdapc0dhsfq0qli-perl-5.38.2' from 'https://cache.nixos.org';...

#8 25.12 copying path '/nix/store/k0zhh8nckyw2b2qny1mp6isx4jh0kfhf-curl-8.8.0-dev' from 'https://cache.nixos.org';...

 

#8 25.15 copying path '/nix/store/z004gzhs1p6z755lrq4qzvzrp9b0r8xb-stdenv-linux' from 'https://cache.nixos.org';...

#8 25.20 building '/nix/store/bpvphgz9gbi5l3m8f4vvfqaq57449ijl-builder.pl.drv'...

#8 25.21 sourcing setup hook '/nix/store/yq6n8b0mnk0qxzbs3ajsjcp8ziwqylrl-patchelf-0.15.0/nix-support/setup-hook'

#8 25.21 sourcing setup hook '/nix/store/iks1pihvbilsh5sy8qvpd638k422w9i8-update-autotools-gnu-config-scripts-hook/nix-support/setup-hook'

#8 25.22 sourcing setup hook '/nix/store/h9lc1dpi14z7is86ffhl3ld569138595-audit-tmpdir.sh'

#8 25.22 sourcing setup hook '/nix/store/m54bmrhj6fqz8nds5zcj97w9s9bckc9v-compress-man-pages.sh'

#8 25.22 sourcing setup hook '/nix/store/wgrbkkaldkrlrni33ccvm3b6vbxzb656-make-symlinks-relative.sh'

#8 25.22 sourcing setup hook '/nix/store/5yzw0vhkyszf2d179m0qfkgxmp5wjjx4-move-docs.sh'

#8 25.22 sourcing setup hook '/nix/store/fyaryjvghbkpfnsyw97hb3lyb37s1pd6-move-lib64.sh'

#8 25.22 sourcing setup hook '/nix/store/kd4xwxjpjxi71jkm6ka0np72if9rm3y0-move-sbin.sh'

#8 25.22 sourcing setup hook '/nix/store/pag6l61paj1dc9sv15l7bm5c17xn5kyk-move-systemd-user-units.sh'

#8 25.22 sourcing setup hook '/nix/store/jivxp510zxakaaic7qkrb7v1dd2rdbw9-multiple-outputs.sh'

#8 25.22 sourcing setup hook '/nix/store/ilaf1w22bxi6jsi45alhmvvdgy4ly3zs-patch-shebangs.sh'

#8 25.22 sourcing setup hook '/nix/store/cickvswrvann041nqxb0rxilc46svw1n-prune-libtool-files.sh'

#8 25.22 sourcing setup hook '/nix/store/xyff06pkhki3qy1ls77w10s0v79c9il0-reproducible-builds.sh'

#8 25.22 sourcing setup hook '/nix/store/ngg1cv31c8c7bcm2n8ww4g06nq7s4zhm-set-source-date-epoch-to-latest.sh'

#8 29.49 calling 'envHostTargetHook' function hook 'bintoolsWrapper_addLDVars' /nix/store/h9lc1dpi14z7is86ffhl3ld569138595-audit-tmpdir.sh

#8 29.49 calling 'envHostTargetHook' function hook 'ccWrapper_addCVars' /nix/store/m54bmrhj6fqz8nds5zcj97w9s9bckc9v-compress-man-pages.sh

#8 29.49 calling 'envHostTargetHook' function hook 'bintoolsWrapper_addLDVars' /nix/store/m54bmrhj6fqz8nds5zcj97w9s9bckc9v-compress-man-pages.sh

#8 29.49 calling 'envHostTargetHook' function hook 'ccWrapper_addCVars' /nix/store/wgrbkkaldkrlrni33ccvm3b6vbxzb656-make-symlinks-relative.sh

#8 29.49 calling 'envHostTargetHook' function hook 'bintoolsWrapper_addLDVars' /nix/store/wgrbkkaldkrlrni33ccvm3b6vbxzb656-make-symlinks-relative.sh

#8 29.49 calling 'envHostTargetHook' function hook 'ccWrapper_addCVars' /nix/store/5yzw0vhkyszf2d179m0qfkgxmp5wjjx4-move-docs.sh

#8 29.49 calling 'envHostTargetHook' function hook 'bintoolsWrapper_addLDVars' /nix/store/5yzw0vhkyszf2d179m0qfkgxmp5wjjx4-move-docs.sh

#8 29.49 calling 'envHostTargetHook' function hook 'ccWrapper_addCVars' /nix/store/fyaryjvghbkpfnsyw97hb3lyb37s1pd6-move-lib64.sh

#8 29.49 calling 'envHostTargetHook' function hook 'bintoolsWrapper_addLDVars' /nix/store/fyaryjvghbkpfnsyw97hb3lyb37s1pd6-move-lib64.sh

#8 29.49 calling 'envHostTargetHook' function hook 'ccWrapper_addCVars' /nix/store/kd4xwxjpjxi71jkm6ka0np72if9rm3y0-move-sbin.sh

#8 29.49 calling 'envHostTargetHook' function hook 'bintoolsWrapper_addLDVars' /nix/store/kd4xwxjpjxi71jkm6ka0np72if9rm3y0-move-sbin.sh

#8 29.49 calling 'envHostTargetHook' function hook 'ccWrapper_addCVars' /nix/store/pag6l61paj1dc9sv15l7bm5c17xn5kyk-move-systemd-user-units.sh

#8 29.49 calling 'envHostTargetHook' function hook 'bintoolsWrapper_addLDVars' /nix/store/pag6l61paj1dc9sv15l7bm5c17xn5kyk-move-systemd-user-units.sh

#8 29.49 calling 'envHostTargetHook' function hook 'ccWrapper_addCVars' /nix/store/jivxp510zxakaaic7qkrb7v1dd2rdbw9-multiple-outputs.sh

#8 29.49 calling 'envHostTargetHook' function hook 'bintoolsWrapper_addLDVars' /nix/store/jivxp510zxakaaic7qkrb7v1dd2rdbw9-multiple-outputs.sh

#8 29.49 calling 'envHostTargetHook' function hook 'ccWrapper_addCVars' /nix/store/ilaf1w22bxi6jsi45alhmvvdgy4ly3zs-patch-shebangs.sh

#8 29.49 calling 'envHostTargetHook' function hook 'bintoolsWrapper_addLDVars' /nix/store/ilaf1w22bxi6jsi45alhmvvdgy4ly3zs-patch-shebangs.sh

#8 29.49 calling 'envHostTargetHook' function hook 'ccWrapper_addCVars' /nix/store/cickvswrvann041nqxb0rxilc46svw1n-prune-libtool-files.sh

#8 29.49 calling 'envHostTargetHook' function hook 'bintoolsWrapper_addLDVars' /nix/store/cickvswrvann041nqxb0rxilc46svw1n-prune-libtool-files.sh

#8 29.49 calling 'envHostTargetHook' function hook 'ccWrapper_addCVars' /nix/store/xyff06pkhki3qy1ls77w10s0v79c9il0-reproducible-builds.sh

#8 29.49 calling 'envHostTargetHook' function hook 'bintoolsWrapper_addLDVars' /nix/store/xyff06pkhki3qy1ls77w10s0v79c9il0-reproducible-builds.sh

#8 29.49 calling 'envHostTargetHook' function hook 'ccWrapper_addCVars' /nix/store/ngg1cv31c8c7bcm2n8ww4g06nq7s4zhm-set-source-date-epoch-to-latest.sh

#8 29.49 calling 'envHostTargetHook' function hook 'bintoolsWrapper_addLDVars' /nix/store/ngg1cv31c8c7bcm2n8ww4g06nq7s4zhm-set-source-date-epoch-to-latest.sh

#8 29.49 calling 'envHostTargetHook' function hook 'ccWrapper_addCVars' /nix/store/gps9qrh99j7g02840wv5x78ykmz30byp-strip.sh

#8 29.49 calling 'envHostTargetHook' function hook 'bintoolsWrapper_addLDVars' /nix/store/gps9qrh99j7g02840wv5x78ykmz30byp-strip.sh

#8 29.49 calling 'envHostTargetHook' function hook 'ccWrapper_addCVars' /nix/store/kp2j7yn0wzwq5piy494r54dafrh83s6s-gcc-wrapper-13.3.0

#8 29.49 calling 'envHostTargetHook' function hook 'bintoolsWrapper_addLDVars' /nix/store/kp2j7yn0wzwq5piy494r54dafrh83s6s-gcc-wrapper-13.3.0

#8 29.50 calling 'envHostTargetHook' function hook 'ccWrapper_addCVars' /nix/store/9rz99vibv1782dxjkwvxr29s7f2f86wl-binutils-wrapper-2.42

#8 29.50 calling 'envHostTargetHook' function hook 'bintoolsWrapper_addLDVars' /nix/store/9rz99vibv1782dxjkwvxr29s7f2f86wl-binutils-wrapper-2.42

#8 29.50 Running phase: unpackPhase

#8 29.50 unpacking source archive /nix/store/5g8sx2db8abw7by9djl9kzkikafy5ylw-npm-9.9.3.tgz

 

#8 29.50 calling 'unpackCmd' function hook '_defaultUnpack' /nix/store/5g8sx2db8abw7by9djl9kzkikafy5ylw-npm-9.9.3.tgz

#8 29.59 source root is package

#8 29.61 calling 'postUnpack' function hook '_updateSourceDateEpochFromSourceRoot'

#14 2.841 229 packages are looking for funding

#14 2.841   run `npm fund` for details

#14 2.843

#14 2.843 found 0 vulnerabilities

#14 DONE 2.9s

 

#15 [stage-0 11/17] COPY . /app/.

#15 DONE 0.1s

 

 

#16 [stage-0 12/17] RUN --mount=type=cache,id=s/a6f6a370-2777-49a9-963e-9f0636dc35da-next/cache,target=/app/.next/cache --mount=type=cache,id=s/a6f6a370-2777-49a9-963e-9f0636dc35da-node_modules/cache,target=/app/node_modules/.cache yarn build

 

#16 0.738 Internal Error: medusa-next@workspace:.: This package doesn't seem to be present in your lockfile; run "yarn install" to update the lockfile

#16 0.738     at OR.getCandidates (/root/.cache/node/corepack/yarn/3.2.3/yarn.js:435:5209)

#16 0.738     at Bd.getCandidates (/root/.cache/node/corepack/yarn/3.2.3/yarn.js:391:1281)

#16 0.738     at /root/.cache/node/corepack/yarn/3.2.3/yarn.js:439:7764

#16 0.738     at Tg (/root/.cache/node/corepack/yarn/3.2.3/yarn.js:390:11154)

#16 0.738     at ce (/root/.cache/node/corepack/yarn/3.2.3/yarn.js:439:7744)

#16 0.738     at async Promise.allSettled (index 0)

#16 0.738     at async ho (/root/.cache/node/corepack/yarn/3.2.3/yarn.js:390:10446)

#16 0.738     at async /root/.cache/node/corepack/yarn/3.2.3/yarn.js:439:8292

#16 0.738     at async di.startProgressPromise (/root/.cache/node/corepack/yarn/3.2.3/yarn.js:390:48066)

#16 0.738     at async ze.resolveEverything (/root/.cache/node/corepack/yarn/3.2.3/yarn.js:439:6285)

 

#16 ERROR: process "/bin/bash -ol pipefail -c yarn build" did not complete successfully: exit code: 1

 

-----

> [stage-0 12/17] RUN --mount=type=cache,id=s/a6f6a370-2777-49a9-963e-9f0636dc35da-next/cache,target=/app/.next/cache --mount=type=cache,id=s/a6f6a370-2777-49a9-963e-9f0636dc35da-node_modules/cache,target=/app/node_modules/.cache yarn build:

0.738     at OR.getCandidates (/root/.cache/node/corepack/yarn/3.2.3/yarn.js:435:5209)

0.738     at Bd.getCandidates (/root/.cache/node/corepack/yarn/3.2.3/yarn.js:391:1281)

0.738     at /root/.cache/node/corepack/yarn/3.2.3/yarn.js:439:7764

0.738     at Tg (/root/.cache/node/corepack/yarn/3.2.3/yarn.js:390:11154)

0.738     at ce (/root/.cache/node/corepack/yarn/3.2.3/yarn.js:439:7744)

0.738     at async Promise.allSettled (index 0)

0.738     at async ho (/root/.cache/node/corepack/yarn/3.2.3/yarn.js:390:10446)

0.738     at async /root/.cache/node/corepack/yarn/3.2.3/yarn.js:439:8292

0.738     at async di.startProgressPromise (/root/.cache/node/corepack/yarn/3.2.3/yarn.js:390:48066)

0.738     at async ze.resolveEverything (/root/.cache/node/corepack/yarn/3.2.3/yarn.js:439:6285)

-----

 

Dockerfile:34

-------------------

32 |     # build phase

33 |     COPY . /app/.

34 | >>> RUN --mount=type=cache,id=s/a6f6a370-2777-49a9-963e-9f0636dc35da-next/cache,target=/app/.next/cache --mount=type=cache,id=s/a6f6a370-2777-49a9-963e-9f0636dc35da-node_modules/cache,target=/app/node_modules/.cache yarn build

35 |

36 |     # node:build phase

-------------------

ERROR: failed to solve: process "/bin/bash -ol pipefail -c yarn build" did not complete successfully: exit code: 1

 

Error: Docker build failed

